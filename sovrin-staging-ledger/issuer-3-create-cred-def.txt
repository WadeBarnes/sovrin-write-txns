# Run this script after creating and writing schema
pool connect local_pool
load-plugin library=libindystrgpostgres.dylib initializer=postgresstorage_init
wallet open local_wallet key storage_credentials={"account":"DB_USER","password":"DB_PASSWORD","admin_account":"postgres","admin_password":"mysecretpassword"}
# manually enter key
did use VePGZfzvcgmT3GTdYgpDiT
# by default use our local author DID
# for the following we need the proper schema_id and primary key from the ledger/wallet
ledger cred-def schema_id=70523 signature_type=CL tag=tag primary={"n":"98195418016726922537359303197980345669172647509523346227599921236672257305399746184466889421882590320162032838991991688887908366885041079534036479214673015396044506725735293346171689089718955917344101069590290341755915557559713117121802390913021972070349906522135579907841976553133726741041738971766381008025408990411734009951718589955764396989318092310127569969594970457093934290345423615355272889504105071225882409028665054071163636851244176837653953101792783096888538575511258243679457149987095235915034256814909180439015992939934267752469683319305999052399615983271621058443985054860858273172579428859779116109441","s":"73573537846496155820776993889068552853043914301964745355747415101669766787921563168786328065597950371532613889636376653756089115374036589395399517741364880901963117358911528899735048033788369199628339844648021079778501792475165945961336580753738390330935393639800219906101573294643645761483052817133269527944898632341423304573388475301534639248626826005645603105961765495242213449921893680769770727191130145224801545036431210911205193842299959399005108308364575295312553066323561510904649480126086033345486473227116549802589974837405374872342960922865502914633208408027734496631214135307195886534487692833467960858474","r":{"corp_num":"50010268892501886955069240723681214675694548470145415030734599022829383325088027994817035448415098653105978199718391884224465264856773470720474263996032810035574888792765914485784478822682238745869811350728764258200603714026468685182613788171220970675154467167537935292841153842489948394690848034920693363387293525317138277332301466311959352208576546299631652517128930977492572051932540430583708609805758915470126902611763231794557405139458492632733907091510872244712352686045483950550336436359991306501792615546361813250307482977041440797016404985406764660844574370140027464818400992767307677793158491371160599377199","effective_date":"17910341358710650250984086652934385850751900817912157801811483702437999533907317576004246891870817292990301384186162153573146392442208651496555338799506765394216174674519683441971748442053776887919101958981914451677163244446772581997671454463441627996359382455890655805577878201888057042775298661034780504459268290141233018690160257298958051519551982926670494313309458509488262916456388119369000220284094324641929523606966655040883381343502547073560432507212999647184628588050215322854393746976421546496220059920475930185617208018098248770384969131093033278636670781061960222776468513116971192481906169494517122106312","master_secret":"60142558346675023773044845619873337716468393095676305927797080765531619636445222574567240438520935129672177755783798865379286658767717939690433956271783431213703236502436040181350077902768680560645120737142830350447041188986057375973993825518252860478594264099215853493493460526352725818177196268339563871885898863036777310708623428325362084691692532804799418156371639026929940508295205084736160839287551782465416910761713455051594802411348574106147601877475817548724721804365169617089408248550973689971900060920503930748867112800390929914223943889865701477312233683718858165328695681497771752416249770374464342601535","permit_type":"63576895793542627570540172832802798765024753845974062059699130299953696974436955279248820437298614385682838894444749902661895696550441918390564929222458848821856711074385998881094287425606057003757668385305512267515863175183624716234839436091311989635125316292534532147686184550740637190693243048075682880314334676522672855807681938536014156394670802252882993833273087391801476194949518500812538810483978145019262501459988793562377480867891465788542218869896368882837291341090783972906882595637445465799310554151158827934041229121705402265739516563280657096167783217362412489049797579108546863585693292763156622243542","permit_id":"50187146452129227620170820374091328064231200841372304616308170854356992695458427529017995852675241447394390600445210663887749400660033995182609345833856959052425287175958371464160235124660523944065197580203732223991959340060456498827631124415302979477267664678837125052745760353141427622669545547591415989922016175352187233294793587309569677662461578451804896958238704327712299711620890468444113798819952168993367955179860596762173962993357934718797252641564391144021584631902150355702353249032711953785695143037915212351408207197888879064848433127973977166446155895666755289105032632096683700683349039240363637125673","permit_status":"84078403789973856464744236122946595970613408619548569903227559382917217333601042025366189545850009368170605289311265378115119563940991695393703162154589781503974995909769002598375808589598757217910491593174815788185554086909216239688411832091889218590305399699106635643699474327471176943348408340094388582548449931062273034692959167837598491507453864449680311437584137558984536457519947814674688893686110841372396075348380840182435389935193900862916750786262367389523953951366547264800190961298444305318411113971020688254625341499164720127869968153637917219022931458213309932546566433138785364886891684156351146972832","legal_name":"81963777264060090550478619742767142708699330872571080573271344524788309471942596482477140555406120001839874144196827207822238002874954486556746293912939299873618679774805369697911137874272132081332257286383480086631375118839615814319931803090431251060834400167678747768437590446783146345649265639056410763120065439165597838587952902779129164826312848560972656699309352805939171020692627771877515916069567763767264720231089273188234281747378408391006362601035241251246676267536663433059690288744848434513407021398673420019944606474445897554349374584691165977875513841828110125932468669768828395257814087964683651454808","permit_issued_date":"88145009113285371397187727592052221819374487684748635920926879853198413847294624913774312630924361933687551271796815624145407547247099721270360513042359898252964974603313533658493629308786657533743760824036628586156613452241395652884607258981023353081047691645046962394075146459817395121826592440110067732435696038762331256178588235987715707925307350680843656744009037746017035531762853142795781758161777686318350247257038915113996728518663627551597399807199375760293242269160157922698419560347028441940726100084796672359398675571686416908306584285569906466474440714717462748527450331801281855382947104679334791481736"},"rctxt":"48103475141428300672085494647224573791010806553863989491782608446724261805011969803373017656242012753729426987432567234057760814413588846732953466500569680040812980445560389211171312904764867601144679635984541867356957451739348911231583671381660698855589601830776553692049742037254762331358513264615791372105525298129848920488096884454166391866859628273760593705994455531930948483083204794920373358167433432674370424404241327890553781128076641018826602386938597083720273529695703780935553387096076310040987324065325117867208728713754959252572844077380149142171845190872210691605562103327899943032673414632056790688128","z":"11801176323311083901339445408965813080732356851777698353915306286858398462480966635712409866971065013180162721705896033018713306589284124203865807883154941732000400217362334239330206062093953485196905820993053118768332784738792975186556762228327756636924203072482648900924191332413515604327178480444540810671979685741965686578513403341414744637067463290376978210541169072472838645474440907459072647482393859679860327296345543499315319890982167421664782341093376691132442162124973803646635967826423987738774072771416794395444543131373018967243769274552551575035925483148042289827889989104522551568799467488138150658208"} endorser=DFuDqCYpeDNXLuc3MKooX3 send=false
# transaction gets signed
ledger save-transaction file=/tmp/dev_cred_def_1.txt
# response "y" to save the transaction
# this is sent to the endorser to sign and write to the other ledger