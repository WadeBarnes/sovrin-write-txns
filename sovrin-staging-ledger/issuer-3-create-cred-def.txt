# Run this script after creating and writing schema
pool connect local_pool
load-plugin library=libindystrgpostgres.dylib initializer=postgresstorage_init
wallet open local_wallet key storage_credentials={"account":"DB_USER","password":"DB_PASSWORD","admin_account":"postgres","admin_password":"mysecretpassword"}
# manually enter key
did use VePGZfzvcgmT3GTdYgpDiT
# by default use our local author DID
# for the following we need the proper schema_id and primary key from the ledger/wallet
ledger cred-def schema_id=70371 signature_type=CL tag=tag primary={"n":"92800838328941457074248152213854582126879532996302236494160647465424839649186613025135632171446530010493890097724428913679563521331996119073020725792094645014427589834504485656307388909853595987544315726604415181082493901332110740986186476012613113112777714991531806571649230320939806922505442237357797923709977527328436128505446538944215531691798724798851460755409513547383023939951648847744791070398509423153636044509782638194698507979462365829299027674015993069834189591806040257611520626156521039100739919688809691026641188619470013039048770598234343735307161506850700332491055526709839827271351591008373922044261","s":"88937593603620548462680060451897189203016077914735149522955780188277396266588465460595669832269027014409908398771486231612363099984431221420348990900575532664427547968928357509957413036605244293957520483050580217419652290783589277004020527633944304578987892983559815588004937185540792572156380999556316114121840928331692571746316330833482206417928089853355550064217372728392277806287620235908646064644857730147953689934166321536843432046960550767092966475652326737499717917206572475383489628414345601094226679349454173496978256178389097699552132729698278906021567353163898914475583471373982958945745086876359930385555","r":{"corp_num":"2986735809670810420220684215175031034705497036908955663859250107378014461393409562801697497956845410812258571117827063991353304110423045711445135242096905943680208130254058103630645685364499228628513273319622400719693698314827303636048663069352284630638369824028367087014966824670032309078864683723808247399762642332585993470487596347275315683204740371736923775268156514641323929825081999398601096631476861620543878341853020529751898164293848994766615666971804120949860644228974911797813408410221070613863392040316168061952646031001589125960955874700951830160105975065908023197347316721638914361171915695304794306957","permit_status":"7345502445632594852538579362845266361393992512666889126754463834514385937711384730248257642235935828877190504038981328822149329756528040191860563729773554094295478970650892920983245495592271429879632832572274115043566485245350637089926773663142592235861869773404554137211725630746645717692322742925517346485561364033953196869537496394659890950483680266484424647228207212073931558305242178466339108590956555606485623834108633308374364980302730430482192900279492652058581519352521591730894668016577195606229525615865010705955222268981055891394370984726861013330791416711181830922622147548057590704220962555363359784503","effective_date":"52464003695691495956269701706192613976481361296031242963777631851420999075863702513643512548307601987418049744383679687855759089380999189215940956841420045682688034666340733750031585409543997861030319377476246289938896421890895022263757560773449369536271879713838994102276159576250180115343364260431859046313584145075623744613312921743176172896341322935080130847056335343757251768389024294524290946043764004062012994048283171746463020171679634414775746729178272434923314251268375192436823872446586853740063375685621525336119340176510470728395532667714719597240870062523167886504780293535373308371622726846958233600149","permit_id":"41481078954368011860639434810608534627724923880259769683639857765701638327245332514836535361179162244799946758415436665871407305764194777703956659331627838147739307270082404460333022393919170727607463991941943816092870666886276524913694942893179052493637568298902989195140380787492505520961575027169383308817033144813420420990642579308341801374993821279565763236977454771686593066103977182648753476169634680647787657276108391317887274335339958625103268868817884811554076480012282616089370795602174547130293439324521988100560472303283636173245787702826163011777529299308751919807280020772243310844766537160237220141962","legal_name":"31355920158295249080527144109531838887997664053024592676945096465838137083275615000385883199707487059734193331336943735026529612306375224624853267808981277068886658537532815251037714883281092756026653206019252246158828313495339768479920612998380406617733312408748174260010160440680308944598017133091133912607599343332174564748443637491969223428872663716939915859592800989920659016641831484086132610059445122888222329309851482986379665516975285318508205602764333803480604033786351960694526471683205878511895753879640912214730485276226773188354365319219805585886743307807596943929789199327174631681184333414944220451882","master_secret":"68364767023517366949023533969800248438183138455462122661136018357733013713740627357830698288908649333996587602791985638689749798469486226936216632654889934061285720389896631598885731013243774227527250492816745390609046630137925986029188072893350581331292681722683714852061197720950837441794921798228035275609456670925554189195144294500933877884647885952779675962466369192617279224796673645789572882505695854870234939751330230263737207873327642120992738537373330855416327013257337185167854482654671612905317465484867590708613330671085079143883107602248366890114213843538936335359803918426960651788528876376276138555946","permit_issued_date":"45641910988183427976471557715437392954475275867027482475618270628031178912747837043642626558673934071679911538577307835202931619803751426909852280256742021761777007390093406996297763260413541286191294661161928439235958821759756484100441775528793352108216032493972140828805101230627995382923606571157303527599614897439531666531077196763661362554547611538415875616173434616748727409788773795603628398961750967666181157953650404639032963821099668215480917856814103279309197399872315703431498180050659388496012896098025535899835854002893137871968176643431833910766639145734874771014336785674518495899140457255151840999309","permit_type":"16529369566993727876095359532394456359414192686688244874486077580718137293978652457677654715555311988756105741425598213201962333118462228910157576145791667785086632951214063817692539522641155342134089283867165561165911398273127781674473833648822824153600652137579959692067972777554208182963919018229830634811922759869218529145144132676207742396304338507436656726016428765041222272404345552802948284586800454022392483792130567267244048307149140656586180917176408581645586187530609418263439145964881349280271678241335440057956158668788343151892946289082367608545081363760413825276293817440805534317878792173235489264725"},"rctxt":"40300032464722616361314414255549227686446112302167214467962216846327751742399500533509892539083949304871885856758713838272941453405465197106616949305192192398307309288850917562122343098081960833570822606981165952764063636430550661666868028959235202012749640370968840828059519158097835168108056965798634828656492060906620362787360685640835182661817856119226398939926119109364190311430837495445591034307903303617997541562542068104104079432823736542205681714623221848190225326509349289126702671995424628337439734162801423203918320689860235626780738701154347231543331578427403861499348609366485058951083126743673600636992","z":"68007965594171347904483102073826367779491543395735779750759753893777193604112900938572841256057442935811211367253210786540481118367970260301259415442028530315968275358586913862531082258359264845078166405696688331539066870206625410808963814092542110909450259719815455423283207478829972740970537764802330995038656534081956881545885433833645015061020249609251196865658185976559606404421487082035222745731814711697480889679047826212210020207952712748240512949738772926082757316153196095639596193950036579227180892136773852355380319102586236581159872782098004879124521619929915729286043818469085136369847466403232089672109"} endorser=DFuDqCYpeDNXLuc3MKooX3
# transaction gets signed
ledger save-transaction file=/tmp/dev_cred_def_1.txt
# response "y" to save the transaction
# this is sent to the endorser to sign and write to the other ledger