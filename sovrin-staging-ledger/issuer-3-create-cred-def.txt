# Run this script after creating and writing schema
pool connect local_pool
load-plugin library=libindystrgpostgres.dylib initializer=postgresstorage_init
wallet open local_wallet key storage_credentials={"account":"DB_USER","password":"DB_PASSWORD","admin_account":"postgres","admin_password":"mysecretpassword"}
# manually enter key
did use VePGZfzvcgmT3GTdYgpDiT
# by default use our local author DID
# for the following we need the proper schema_id and primary key from the ledger/wallet
ledger cred-def schema_id=70562 signature_type=CL tag=tag primary={"n":"107279585562385643862215335281078409024093713095515847535875329608692939325789912104708604984756257444376531035675811748609988469685452072040538318567380375854985905798063317908939452623079075954573334699046706897118253229855570558856266253478473293433962055623684097428292081235719482286777051913461904997268884620746754458930351107476982741168509080147434393933904333482275717506352574246166856262728952699188849594594487607631356817500423172266665356475209946349046356869167151212158461981703207034626873664909997494398745837587715980956073449686329492144365590531616920216156840983967312662247278718140968896892841","s":"61695652935122354789148626774306824701602055219058555806475190095684133794041583782425242333038856289131884613110177782643561469912621711912527402792237493441559323708976285089539286949801502284928225166213529176479535994972997309719572104551285661625377957202623204812240898919614086667631424207382734353767099459445444977684642017065456061868488350847002805901128029973051260618056900638898067539566337279737077437700915398982626455487263594054539567076229530702389196290135560798457793429703654938951312107372176662211541391717296634692290428882623940402541110215331310134319110660103659138017783551481520075647109","r":{"permit_type":"11132358003469443596359409521357388049438435327188604397460673349299028648431478550948623402426200629199287027466978894712075180998174198052966574256376711207523860224943275327107156866933834122197390121017435497415528252805096419884775078777370010372745951131266707500928249121291259784497807733701319718513665139927611263718514991564848436102702296712761094860861327222731512812744058126811218322146093265769775579722318854584756008664320442718007474446916146491668075801242603704576339875034174518992123743486879038815869612918071593045012541764351051192642440479307968411895507151801714040593371306265052056988843","permit_issued_date":"40104569306327684633346044320625005792988249745852014403337048030654214121211123251313401952930852363738891616813666839787838312740104850276662197851423909713603574483294497219525026322301559768606220929274367755263649443188236886478170182376778522070293401021700553463664196584991346865301317751656713842238982186170754057492200881432220422988450794168979256230990209898320537350301922026872161622700687239119655858285950550952389172234499899999869186053827783156883452408136240442354879545448339313613126125732622680758468406490826970731735961191613079884381325402578048423510716198717830258090692627770399314609177","permit_id":"70844249383182955849462528977912030397687387515011736889414829445447492984777594087834604445519760672195479090000915092590391152575388534833185581393495652081781705977098183093467516594019770031631511262550902684854249226722680346296918576336120360995571467598090555015277811193622454074671256035466401515269052816478782233853495686394167618578833438689792932479784984515873629910917440562570299128886419994680751391964719231240982339969843130113327438045569753774333441434970921021485644436196742079317804058975864407376824978234632742326393115219424928619490692656978585388409794547115128037732219768063632458994418","legal_name":"15487519271975599609122260192159205762487716051637293600155255488830577675741091677686572999140875763511316369338667513513223711930887161810845649732614753164212137736995390663243617288037117482285640600330999101245982240229027417044381629952245609212150505640526142989240583967659952933748446651648181135204576643453988222609857207147596120532357803589841488499669719761597136047884725662142631369034486781079834622722894793914306269762350435455358577446825189501759466997299331299794558563286825524454045723548087080455169114181243689449918917412357071556057958497862722039841011530000533727643504885968163998058395","corp_num":"20947764625817427544260648875709193288774193729840696653105649260655094183552230282042374037487623898793309660241461148576791152822056901376812008463647531890931081488361099243540997971200176790245489657947658219276082136821161977085580900576734831051325789495168980478580067448055923867800086250846502052719187782987599467399339911538198517330834288276404673794084216985416773853846642153872429559899387148902687909628509444230665798611682701349810461243723109694953081610728888768169445980382621598543523620205709234155219962257099526628737891615560711311701691345133853598310925681000736115141449441663217831485182","master_secret":"30278256444585740708646510378338598591495901228195373086799964932921150064557556443595646881788143755430340536335682184440936591094680465844584464688048197514759458544925778620992415600301045339234571335250121272860275662811680167356145351848740690532105352442333696037290915929337280496673252578502935488664602900134302332226810565989675356879978483680925180022181909638209371448654047896303219121187096583955004160668542440119128464057874856938075012373327693156693107592907520086262313070755938182881656720069622112172174285682434441832174705023336418618777707408695183833961336593987093291802523593103479709087118","effective_date":"73608586670955248408099322875654263707054232217807232941113169766682949874106992255546391832975348719442347129409537391999957025780925518826601551694724639854509165413499462856852252695490914404679569485577008794780186634054876780547343186699722155139093059337731693981694366510866886607188689200489987538982550214076495154542318070681499705420500822099888099384448651081395893292346808316018474176027517392829912347243489345192800316805236570772725622223329151281047072223432165389598909737726885986654191778309032663813261517282924157992979118713200260293480366965900218881482857913970733906564151752367096794501000","permit_status":"88540698828044116363623859796988866373011766152984875637837456387840312793771918644921574504482900744760500116030007687539035920238819286173348582076464567794179382320825295440769937820732269205193281835837737034376565363798353752452807694537274836633654916625389901416049657703666181219347855927854350841979574967834975946461294214653275521283562750522384925134791137103383495452336377230860598430331003358416816049312302964657312202436779602235447498404377655049343848373877887324445827747115815173902347025513633646566763906594276173924160798220678716226694790502955321067073218412327619278943700370962583502170220"},"rctxt":"81588702611286309311034215712885700256713755929528694660144922883268000060264394932673679543319300265484178656559607911768723119239197790432119607140774566455837144336627875086519815244468482878441122339949318932617913219152248314034347612806532795161442873739894946261633717688347844039102927017225605088870372535988518160598628089540324036256521775939209586881420204870243915014102223072809397687229386698654551483396913333900595758890697002276321227344202191578234345576840295912836122011682177340179192699693269749035319254177166265521201945787737593797113940451139867410085820280371708017275084085451710602084905","z":"30928821506779744230971939853388594529748588663523041237166897211759275019358721687837040129207336715361921833911766601344306597641352558326445877714863857867421368216436599715465427651667321292042913954299279795412761574059417101412763099393356562106442405144868459729126975843163416452399176648586366152348321837472828559660440704015180805556321041261736393199409507834374797940137292603154298615637630242948633519009609225467899146684968982750901986367406041954594927325008130075794234788550940496332486012119394768971785087767540152349273252734561456661510698252071474397465002483957301343958514117905902751385306"} endorser=DFuDqCYpeDNXLuc3MKooX3 send=false
# transaction gets signed
ledger save-transaction file=/tmp/dev_cred_def_1.txt
# response "y" to save the transaction
# this is sent to the endorser to sign and write to the other ledger