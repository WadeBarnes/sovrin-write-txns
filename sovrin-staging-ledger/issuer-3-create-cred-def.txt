# Run this script after creating and writing schema
pool connect local_pool
load-plugin library=libindystrgpostgres.dylib initializer=postgresstorage_init
wallet open local_wallet key storage_credentials={"account":"DB_USER","password":"DB_PASSWORD","admin_account":"postgres","admin_password":"mysecretpassword"}
# manually enter key
did use VePGZfzvcgmT3GTdYgpDiT
# by default use our local author DID
# for the following we need the proper schema_id and primary key from the ledger/wallet
ledger cred-def schema_id=70633 signature_type=CL tag=tag primary={"n":"98801106491247286532033173919294667247591240020191489496499455161181753212395882869914304211924478383293396715744156167658093950703463807894344537166316649538538816740460997961206010416612908395871681791785032068816682480710454622855705890279862166241540854042739244729773573473830790747248167692153569126020879098175221236005371570366589533190954127187975558457901553782495706460590045109651594626134428999822028788057415619654283305282399212312951604404064135163023417588175620072019554876491213926210248583336580532583821148542809887959847350122465640625235927461961181328685163132890281519149775466988775994509541","s":"97177263795603967963742796421579222731432829204368410549790747797046402651738459630388332176053499563554775035440417644193604667083756387214283333442853487405399399015186773105412680211883307966857635484531482560651954625132517476412346642094688176604338389448490238668037400820786364603344976971240964400814182241540490229934665519597940084362676692003190388223713581449225476505503703658426746961769945686414977262032557690199418257343666957907965074979261628532641923921769038921360343974267186981678749619489684081584148973593216168338101995989434556466561249221789506299669389089383828172878778836894431757738648","r":{"permit_status":"86254694026978115573911225369217922863174343798545975105521499523252709623597142373814734361725137855790780336863844098389622432561719866155692332200407463127977920922934612166765494305192197076398113282746795795990472101620073461501574887690989055134032282193113751781182984736014233877724335033014992394841013710207431945640530128586466344448890428327691510951755323964023789612597448624207331211577697566207337378618188158666935367688863352595362260933525713909055460260062690554414451310220757708976969179464862707229271178952351355558565166795554630785982335955511081942623233444716510814325820602392214675868835","master_secret":"4507161943491118756938188388277774300687942504455100158228472491267593941012578334121499518955719332319822055053099926172154286643874492132957065669603937651912811496289875441608198597569779714771157561507161569134831072827523828505252513800077310331683481016846160514427864868953922531278954427735368720706176053435458460139906402872383237971736175886507832276685278173698176937573119332345417255747315805899840464275075770611935471477155491129070159948095048824106271970329368194603677672177782472461317298193487856771878904807957666893606953266022002377354051268212758750460306585261724215103522549679852627872545","permit_issued_date":"54072792081602331836560420465992024785219381756169946695955278940191109077423644980209053813261091683069514104188487151520887412922324262645702291874891144069191678937460071796391655728546882640534820214862071723133912043017898011877911710949862184743312787840423455661094343273358638531626772658842569838268311002677515789663990263233669027542525965833492326024535538397949386655888562930908418652913775399635115795112906855409001864420207492104638945799536683387105599814400905115094798320310626561138081188039553168718889523000978402732273801339947507179629806724798666698379521456939874769180149424982587621728635","legal_name":"37497579509103960167914333970790981716828023302550919349353134519787860758128310625077387794383540637717706435274765444410589075483249273830518718129389234738501876514948115241506291856669181012189992879578121293673630881004370171421566614536206221271406551080042860585408360155633931614853657217940541146923814673980668100273367331860360009194734001229447913757462941963753905675617224999457106112669555956573445968170894861244975219672507933862636648352689747220908597509575166593305787268710092882680554482490888698910146894865886123727335850584098864585329966409505971333450841221164369338442591098835389444861423","permit_id":"88529685049543659436406168405949558801850315031340444016587648669803881793533392586221571244576022840632119441872965884046932851321149725491128096609938303978728169033901320950551473846756073839223873203670332439905469407252516152092960838742960135261982600247657355188209461960624009573478515769528883703981704821558668026089556166228512302559498556767502047544293440589989346478696744435244363936764810177434847155907803624943375847076798953574662654846894745931169080150302986225532606846624091072265529998803348589787701630987361164821498040257364414558734432554907305029976099133882873746696680174660431708280052","permit_type":"8310487855847491977371767844445094448420127559268768631249654899762063771736362246542600892453622011776256729025818694373061772682939167742164569613965977667621635096805272881794465236204376727180013183740107221389462818154519590757010092487803410230193466603029402566475945994176913715483105960819654809964192511278448542751396587769512711335579978612835515289586537732192057402608270423616422469829956174851414665037753739968616585373127912692197457121223941669863574448868998776430212520909903787673347233382341537852749936622932432921854364808144657405267038380107011088241063729891981648848314777005654281717501","effective_date":"86187097029241968769046097878740576268165724315519975325078827639747807016339780609790792820497280679006334452933073598161120955828365025615254143059062903819635776822359390461739602282195194307614576042272775990034832182453581454747952203162735447747219685807569154321524056254375239662875729056377614399756610240594756360888587121934673835106516079852237270402988675246097278729945559225856797750047477138944976543741317091925930692884952933328380511650840547532081012588927120495242593125299935760887454343079855508249377052762708711826278571797638152281219043518653980935823986409818892941337860734109262199854247","corp_num":"53221050830215656644807949518550261242579194902205639522702991762512942939981967010429362716525230564376452364500462994530352035744664004793510292688507364977358260147612200862068580928321177690526312765387836283313527791694929073127942575258653743544926900629593420043959452078209351452166331101850250606979181253100135543002650724605658582406396589428778782336420347615527676439429443517117831725212386623641263727866267562018661415997239812142104638850711472911112131321965008051943634623978975188612547680392296544073782173069437575879615720516378780206784431947234156545910089412691739223154509006087390118689889"},"rctxt":"42574002515161033534853794143237403564086443583278317079459430996250837793114980604377203582029958288948103368522769633698460943308175902336401412516307552331962326906083322984174592805807720968700818779088953938278541818061232365241866882373400268534995308054614812180346860494381384190205570776129691121825987443100317693538706944305321824781109173856814547457859181151814943420968136109494885062642077950426740469726425456157033360986353687102882921823587277166313069439445228436347058332425246200074589668315699462027547488994411199401536354341007585845734243292160138471368207611587726834587601600100495037362218","z":"31628268364124117352353356881167909986966197028844612710475664972218141837077506466633614715222449274423103274548894110910243370363014912781705630947421282240905107860040542441757200701961847019643723007521718697233593780570740024429640585745937224969687219140575700443533121230520120577494551471954252238897638275698834519065020229215832747781712412976005946945703162324983728227652723580672906655415182391645262422097987212919306195916558294222265583299391795214773327527299710434048331772648662049632250006327865962453162429390245677636344498550172806837583349546451488547653460332431930465527014564514357066874861"} sign=false send=false
# transaction gets signed
ledger save-transaction file=/tmp/dev_cred_def_1.txt
# response "y" to save the transaction
# manually edit the file to add ,"endorser":"DFuDqCYpeDNXLuc3MKooX3"
