# Run this script after creating and writing schema
# =======================================
# WWJB - Do we even need to connect to the pool for these operations?
# =======================================
pool connect sandbox
load-plugin library=libindystrgpostgres.so initializer=postgresstorage_init
wallet open local_wallet key storage_credentials={"account":"DB_USER","password":"DB_PASSWORD","admin_account":"postgres","admin_password":"mysecretpassword"}
# manually enter key
did use VePGZfzvcgmT3GTdYgpDiT
# by default use our local author DID
# for the following we need the proper schema_id and primary key from the ledger/wallet
ledger cred-def schema_id=10 signature_type=CL tag=tag primary={"rctxt":"81403816842704993076118217324761082351393943534207989496851476361164344565939199871809439318697804218887422116856109203645448418635459905325987587332599843642667370999536007864231468466912559710232776961685561206069674040046327561464527152711518732509653584072000423357617349293121875916240281694340615968875149421285896839516763631870781592129530174876842566996155079693325076436124167399836022547300257718055725983878517712639410254289016343277776362883357821660654632616409097792683018690385885261024953700161904480107405484273898379418844783320590931100677142237799465417368213608833642757897788231953657647039419","z":"14522108982678044645388656690665264634926890355497690953908763781779666349648917585644543454896923032770294371026877349019135294953544922657600323248561605430503907756171519515666788433657192633711868926284819929790362947303540666341625453178941627694553493615017585563385822970813341216505413320300006551079374364668049071836677235930220994398849618893657672028640423793539314776127289050995611253250578151278961657730137750168843219103110260082780978949628596936376814208299302058282994832231539356214685493213495131327337064850656009121577846094539690225511029167390044509937950844804066316257145340282066753891719","n":"126137650882412161655538210773270347225398911979431958280245948773724887518309831537988386015013605963569393050241452712964421624704759490220686530279227589602224168292395155775778643650328100587391640428150951138686582461757483989357767150422343512637326619902952555630991669429552480174419671298800953702778930720296843121834147951553899558435991647432565875641481030108702383809204208507431869272064061449856617637968094355718631448686045662638220297487981931285889293029156219353214961800910948588398657006009913217571619847995027310017971568743435176833644030858767915978201686248401434820087336299561761378349229","r":{"corp_num":"97226668635326523346358181482145737092577955948851776732243561550160177866575919039855016328397874649335812266592186610310904747857683146664703017940181727259620462214620651904600084728852967143797595842393189507520643607666750281821057639827854078143141016518898988702234170346581169760842580087002905499146108938751188321458748452455489771413803730739760994650964670310811523798783439159897612261524007483183471401145361596418263982749525317898700460537578365770823677925523697798191922572059764753647019436028418227454283071536508555001721835119307947432148469413926524389434498274616495760800523850593373757021301","permit_issued_date":"45135195409560881497708574600234804366505116493819990877741886614550367785222942106650011589206174552965008855550731933516877883638583946930867149201549827882547410036991945365696023415045957926040531582440086396745186181078810625088390068025457580087060628854165806347507953947155029733715814068431544710909328167248661813845554797539277153591479030456991329881849146718849294502296805014588334711730511862924750348842306194891037005438314891848048128702587913265142941235000363785742373828023743318903906333077281956492976558958425622025443942987540230811018201591689008854167814017363854190216514434988308779015887","effective_date":"105663328821351645494266302109516018170813306103708050599437370822310442250916472173242887799798312545235058130797959096240544616215859137477435839379363577798635770229347923190478480104423806675170735554862510509070516352492554107364176145849457073239219960674732188300773626027997609622658216470506501685399567986380290435901080979193917402438101233053974121396783799071521411374588420807178321663458170915003175320605453720434588652816410386513725804917095367744252642802096047694191098308092563557241773285700565723348940759365713499241742595379511003508044317276638168462101706199482493911045711198005122818897541","master_secret":"9532698816368137417621672849239466064511199882335361536290715309576463924256981545094382399693834447104892205288179857342270999951035948252963842259671981125972608831660992002816484814942986038356768400134381887694160147207106036119959374305150778479221275205548546791511585184260599016910199413538075296302876680386874020534095300067231836599495969706622306617596581565291871321449658897125844853240787189880217510891415360252961574710162819237033269036654934738296285521509241748681602655769621420779937765808692157079675889787307004410781486663653795387890480902462693894957036801296382738971088260202710901572135","permit_type":"44750896536116328625221305621446339613800531576252257424860628666796800735055862294947588043821137422555290756117504867300987768268828431848116699338072150600199420810151199739390295565251332735105908991683070092527715389213785852240396176948626503408307304800588270313625207392480700824964291490066432346873073810024027470890061526341761114363658217012494062933873867029617851871505698947585987083235075451666787945871050591814486705265001357791963370270327547161424958980339212633483062603357516302719473097364919717092975470292898390675253871162723882288380886725476065298553599096227621655646809884368926695360093","permit_id":"59998241777682091411425115247376668648883101576728872310802069458212600699952837742586420417999939693547976706688107353407353247746867266819602341864166289679543244189763578937313000997488933448499343445194212266084329996496452755579003411745937404317132208399869184508013850332802541066385530541558216773055920832844428450898261147443236621700533938410727116445945601211199335299110073713266751623038010148855786429794644619223324736277547907812746565259719062741527173272270922305065313287936192544256646231188004448211701267932205539974499585812230691586896876269591211709264740884948499926324571666165345031966540","permit_status":"79068506404869872409880777703559788651495440067504491926385212404285880921560430510862912436861841241066910347760270649770061009381936247612009110656773170552745315332659675434351603618863133579354663720361587783359837715219197651296861344531050381719401009068480612767994438789238816926558200258560090303186818456768538987613173321204684746255149295532477937526352784278019937368361527814057870347550102357057639103278905939945729963038147990211549540076460403656323517130423111411896810109776749392494644514187458215728023278525321861764268752397121248503855738507279231479612747374808180015610740255209980163682144","legal_name":"1752545937126098472312371632535903651120996587900833184344225247593914836129190061560709992415653838594302380670333459280929504496670382569390782602263702657526060182743692284216459826414088557931059255857506403537672522530599716088070848929219848068267834184099285941565495261079450856972158379832752799331319890494073450998225880844537485994403339185148558619093719162474905195492251327921194627501298397111723165041246813954031518458147095610301421288323441613513065311996998158115499601007313906234858226312633430320272775276075851978847836399064116473633290197553529206258823113714806891725563729543709871851916"},"s":"64650307609465517251773883508043579010248847858637493331246085211653693174170585938618105905727013926921632157080125513066268313828962460871303517358184185656147102327890702562481749397675007875518735863819607535332211542891788253587972165000077769089991249198064040055976023753871043960705866916864425436624145518179517202307612499470314063584846792017191556825031483111547621577388451521126606664042422005641174316278117485509511015139878181281293786308936475799842990216441393024448118965299500249926458442938544210974983190263352173611926023646575200540366977111124898968624160962464865769522456626019626217988445"} sign=false send=false
# transaction gets signed
ledger save-transaction file=/tmp/dev_cred_def_1.txt
# response "y" to save the transaction
# manually edit the file to add ,"endorser":"DFuDqCYpeDNXLuc3MKooX3"
exit