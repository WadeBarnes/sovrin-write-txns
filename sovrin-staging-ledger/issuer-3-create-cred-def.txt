# Run this script after creating and writing schema
pool connect local_pool
load-plugin library=libindystrgpostgres.dylib initializer=postgresstorage_init
wallet open local_wallet key storage_credentials={"account":"DB_USER","password":"DB_PASSWORD","admin_account":"postgres","admin_password":"mysecretpassword"}
# manually enter key
did use VePGZfzvcgmT3GTdYgpDiT
# by default use our local author DID
# for the following we need the proper schema_id and primary key from the ledger/wallet
ledger cred-def schema_id=70625 signature_type=CL tag=tag primary={"n":"90250656555312540421835983411097098074833362779185996133600388937601111630923807595807189911946195598248380347712385767863358037726482863380543385320667872290537079858909992567884162119775099421904238519624149248846687837168521739843470781562452287873284037473749370734178549500119805789139206974469083657583794047297074291050206712792454174835491495885664817520286451159181226349276867036497689432714076973878066041145518075969565508074694678754958166496646548227159938103918312899430777489003382566640822242564775956373446608585185594557820718897143630834344600931082726448227581800330469579479421873265548800702981","s":"26222391483807413096304679550268622162866337472680193499602006701316951573292185473158388649731323441152130709019353504180504237082493999506230772599125073938549829191575612694394546753276092771592245820565851734230296253584488782292414392522427247474208177365344802545470838015704286488911243707785879775111271721014400765084579796488520035374258400331081764984890804088016941373000851527924581375882358593632695504043138996070451109290021613717611783656122008206194327986138875078587393931233970171641952751417409434759317514273493052606228188589062977668990297335056184097132477606141331310473174315183052856396885","r":{"effective_date":"58190185270589809499724550373677453031537574926206355563379391036736971220863321704655718612777677128949770780848606797423418516666105329444878418337796899206296916646704070463779010329977388342832416420580207716495673688703182513299657863494833697377434392770654943741067683908052374556691758404023562548466915180776035761611398381178144686146733227294023400952994436716138128973278583411575129753697450373055581734095748207842095349569768097187758312099718529154940030361061061247070697614369289928591689839695720072285999041966816095480209757714239666967402127620751358404288102819531278775810921476639671608395508","master_secret":"72650838689273801340065154284513341388315699434737337869262636195307598090840999910612460385141723974529694045879413394546042273200675894153199271630814357327466334725790561494771074469100028188979608741293992759078925218344559340335781051036620317781491533356180485956593307618555499411515033874462293618548018771293819778090022315133663200784233475319984090264681036927977425230424640162348779457459123450903218115956132834630849936213974708651987394804218335047970664371019484559046203392123208667650160111021062067374374190902675242703688503842351593807315993293627510237678906588228766106880343525077040309972851","permit_id":"80949044248316947313647564119198980335651468202371365466985681479306319008018913066740986513527919295154892388992781580121056999373249435927204703644447940468470629697336614699915466888732415140955215438778367556430353195486351962454814657230273398684850996583710386112974772001762362591803650266083213697039103859087298173089063308070084701039246884988345497687049506828056067621612485189501546681843093674231706420758055291450678246554566051017018469709952470218943105724929184377506167729198073155477100462466074953731293587720188456004042723762127242315422607684420238885424524926802016520657019760162744265275430","permit_issued_date":"69520109037697323332286523552629749827344266619072976999499602517312312166437351236775188181166289799659142036305480657865674695220946761001505873259514618816032415200596461193207887459741222877799301003248623454832957318409696565269914433345119274775457118824509950217274287031817097196480694957275933857509008302690190279229314268017761887632862768554221638778887000815511477343557839470128712131368333904900477408834491316019750915464298462753561648846987045742992411272073443467698483144417852526306733610353714596689659611812041763396889420613163890696473619029204861519511838953384731059461047921847387576528820","corp_num":"32635960014888216002018537843244105461394082218592557982577071867108823658121956413725366083684837249889346812685905453360018163529015822409721759031682110349986915026766023629346915235193582371208358372363260335698758923876922830174289431676909094686103098440689767000193234142563268295309730552144620660393134970733943296088701368113367451229940458527428898608771759546154733951538449025584337049587603106599950849619491614026962569724470228193870688494159779206315345993220885405515882892337833910519185823440929749809662188814267334179454806907463690865808117241442498121385601781050697299749099542256375629122771","legal_name":"12030025081524640782203122329658887820253468267305950221202712433453129974654409086425268624543872102615188386051904949210822188247666189354134551083777437687731799734991235847071367527345100723840573746166658967165523549529911058141808229610218552761941158091907667540236011502128386121701203342600980413163384116325177855443161864728788874775060749261400546200179736138933758866492184452248655110317650119078885690107639710712301263216088571044175714688620915077334886052273047983923863595069359446989652346306322059192368465659204044707421083767581095211259159862808335989211357791517609073235910483065527544441834","permit_status":"81500826848974840128852278934110882764300728415494838615158798796706363714558113517786589499142389571018377497425560813118546736003604609004163268444145406090770667794918442574279148757919309153718992883122903763444874801598382324093846652226911787569201818961534044920710480217960381845222018460333272188062581148530691346976519829049210519737488589602042356072063121585773343318166354936854928446294533832791570680141923105205522390846676121978156111040583835834088624068629629768294792000436366265759149763986128396968038000182705422077159123160228336193397597116099540484474282282268851410316394542476518118343573","permit_type":"25498790709332172923903131707467003483879448154835558806904828611322045749625405230237767534971622167184390896365959442394645107474540174964031604220843436151739015021223087846684282866365124754466876400845341953031524357917492445396601764040782615640355580314919983087402662829576397546527776785098487865620170404777752479512153581433941838228788056629558297887113554016262207813184734985202813511913721764938932922465906719513553289157194585239649680554414661383906196483319436831502175878033744091884582587743086459644980096598939301505091890100620136335942907547986935334878110745474967957390817755933331993581157"},"rctxt":"83657071655572961377947349903837247015996209312209076953029347238146415089730827008960014276809732191658518022630495752036085645083487162361484016332704873955076407726054253882698027171609761984691621556257880011332810986446088138558279949536187601802343174194915277392584458842477931161581138238106131742975999697131003628697318346086282424063432510507594293572687071290518912045104257878514134817311061616879151144434666440942431818766039173600511265227093834855482808749722179713602993079229982304056930502157990788961097446613213437319359328066262666213392830169957524350465757509225707936431805871883462398558493","z":"40798864841293813668475458106138206868239733340295669642863111627023345175425385917950649639970496983052649919772270838757687655805540636362750291766400789595393091080911021312186188110797954735791019680417229925884675776188598473255024325247578532567334936864517510881664161896665081252431303803067756034644298017958266612246508184246444876623024509477212756290792371606106340043926067802108417012932807369767898081049680852654064412430416150157469785174085957390249780787214577926094533139608156573976240670769622964577004023252643473175796073895572084844960289544536266832268884562296692086721538879179233718058912"} sign=false send=false
# transaction gets signed
ledger save-transaction file=/tmp/dev_cred_def_1.txt
# response "y" to save the transaction
# manually edit the file to add ,"endorser":"DFuDqCYpeDNXLuc3MKooX3"
