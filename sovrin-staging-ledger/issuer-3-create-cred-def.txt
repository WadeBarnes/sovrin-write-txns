# Run this script after creating and writing schema
pool connect local_pool
load-plugin library=libindystrgpostgres.dylib initializer=postgresstorage_init
wallet open local_wallet key storage_credentials={"account":"DB_USER","password":"DB_PASSWORD","admin_account":"postgres","admin_password":"mysecretpassword"}
# manually enter key
did use VePGZfzvcgmT3GTdYgpDiT
# by default use our local author DID
# for the following we need the proper schema_id and primary key from the ledger/wallet
ledger cred-def schema_id=70483 signature_type=CL tag=tag primary={"n":"102651439055505898719396632844645062093455268291743343314533466553341132164150761625638590199857922335007692518225067790732858388484880946549862961485936279749734065574301013889942043208437929541744882691115897642944641193972245924165023244112040998534128268286084534714755588777263548622881879667989441900816657181179227413513218039813295769833852474270194822867615338127583305232242884979333523238442952233218581160705374248348862362874459363612141008194844743489199130986127111772648701049208341089289849728283440023403541545595275488191661953005603585002624705812958656667471738660826839571651777829466743560288397","s":"26861400022575087162262929418190647342302432857966813812270737474482082722818273210620619950360214771850282034761570400187397947567063478138182956262282624091758353448506518301771135488016986465860469170907361832591148496116838691207210565136571845215234824347505249004875673318286792565849788831548401285033258035187301909511885703981980737345969847811495788363871772228953057173503856763325624397938628851847773102056177611825878683816775934814073884794139450381578199138266269955212212048680936910628751605922418882590731437980049424366513378096820945074311680802172522502301187611033460713739436930806898746348782","r":{"legal_name":"70017171552532402295301363514080142073355348618490933771771008139964089144197484708776024824121656265050014857996378112170408394589198928067203274184057039575448201832951413953474083936446636952330631736247575549669712145569726381384796693505452021281860871053402101917077501371913682694067076393911738940822112734301790993667895169256757900485173687255452217973381979521304048231622819141399307927348442857336458518753523706024727274211249449008497334374310811400261775447124482937900810055030466551527181259889845549626613142847047288223896240258074247377234899690385981431621579532914584707943945848456301472155540","corp_num":"28701524483345132817378846882915832410066482630496141843755222564480299151133871319321370980180043114908249890658632930474923419348263590736878923220090915436326609273176019265501402260189074137296911163321808336226282594284589102626648940909712853708248431192783776230853629895144962479333897854203241681848764629736449168308446172487970435053993949204965406347850153486897718832156967202787720256003364425269723924227099011459758997981826708467842246420026563049999520086017432280888738830979768456362960314389755437521244701967114290559893303675997075770267037257100641797799316163350339986634762575859779830713469","permit_id":"16429217861818903733883043401157033085885431805559816309691619921566697781796462158317738752468894320876118593281247909001854998896291289151436606183862376611003260213837860399053083102366085017554813006485562295212934356368905521280324896456138585839448057351435716575978227890595281183464905250866480341776817688470246549515455975249252888723155615054876989487131128953277393008723654052103318594003267124467396081166889568870729780404849870377433856094389953213849169848701671615297405986193075630609963813527383918768695705830994842822703321756362804433196004960027572215723017388083623997402131398339859383134858","effective_date":"45273355140032357377251035770045923923411972828838937904686530469741994935969338513922092435996050668756585751389813328814055734710456201792541306930050521455258897205299026317390315636484370804517368329988088518768672475534516139617151077668998610487443385454843500120931530532152642288063987931492699140994653196178631207415105871478283817007886264746571824482774614327387919913162555077457089097472349472728467155585949605656141212227713054586319811005205272445163585832984537947222771505974708531703393475543055018817949944203777179841621432960951791163503134824608972471855010808273944758584222202082316407421605","master_secret":"51951394467471966291775247880780662373543739216162470467950181946414098320853210827284549341918124567734547692664637841765127403705240377749763043241109627619617260150165334461634599467143078331013651662872932410837258350311549639522687119048336794079653357601808228619400971210164021165005686155199523713223201320557530488471160900570880723646340018576090137912505685595603956017399574839013174226674837812727460798911934759996858795383544725534290802641403656705562252373800654161343961578320130082796104556057497809822187624878635897889664500599034837551708549224110839837640469329224809216110645069744925370327014","permit_type":"93932102454394785230011972822421108565634371869169026389030443560345456496005404891413366293320576131454486096826497432671754261016605119793855899477790471072236438810585632805642543836105017511081067836491434088705633031903594071831560088650155451012338205885336414437119330632686197706747906854207595327046012197827758148062998912457107996223749556774887187828233677793327623612124919493678637840806895419590159074828931446930947817193365916834010797061851354737701236070782582522964822367422871332377120836726704347283550440765898654141942750568276211655778379147843209778012451353756081662590847809734615562281245","permit_issued_date":"98809283083682568837651718063000716149934689621284918536159233330714346786438514419212500540953382584098190601514240469094327285156482232446644826003550047749420075201032647068461896056838389341317391151324282820816924816375627658495880595868825201570668979719735898414377587693131807408425960058823700105474411905790520170021409592390191167638833304132624546538024569970089757112158783051305697501577146007109109033241349968340544484629795959378632089895289539824013571558646374899316669795200798182590409759774970719500633160330779438936795126816904876584244004031104827597759025646780953839151638078257421253012603","permit_status":"7589943818648335816747869700638595265750943708617166247748473768832844316154355370385153198987800301965796139091855085739344025104923456001487094249248302519699494177944814976003069635287841746681507610284872021221093406836194422920910402258355899917110631039942080355659918398781252920995542357615227141328821380105431559091845548471619166130194448538605805637313991806548335253898300682214387304456382985360257617143741996119249643408026887451615368401733374662405137992833459247675547843714648625711223506798779861448268903448330475319139964086045728312195988018588693034773730750101802383194460221211403400079927"},"rctxt":"31399918794972223135796701520581252813806725706404274168541010315889230189867834921020562302159728280375248020972391644941163974877738809382969983507693098275310495711591041591232512232615620632886487700423802854646086168444935647061477588615373287347099665094350411243365457197039747689779957480524365307394442220170076157206932485642907393641780197194224028222837264291902615059772524679175114307137151255542517511024054630035562886165887119321460025616429202264892135585672392470053944670933544073014080659502966118440206748521027511377684346634614696794105857570765971507722302387469247385957446064499803581181046","z":"51464209625278877894587146870946495443162119632351538234290006593739909678303202783957467575666499855410929516913173442486195441505972809094690746669356844949004099189939067085322889966759308289692891772197749805250144703950529286709610647846832798541104376168290771904949385628550073656391058970293023658339947106813267224107509628520085858474046963526210183849579027834153260351030218150861565381789488166442014570643963707224607232945518420231514932797318386055842031412389763927369694413313084337860552949661372966415894290425519537643575046928483692392998699483222931900398543629011856124215260112220572151437994"} endorser=DFuDqCYpeDNXLuc3MKooX3
# transaction gets signed
ledger save-transaction file=/tmp/dev_cred_def_1.txt
# response "y" to save the transaction
# this is sent to the endorser to sign and write to the other ledger